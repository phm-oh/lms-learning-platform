# คู่มือการตรวจข้อคำถามอัตนัย (Essay Questions)

## สรุป

ระบบ Quiz รองรับการตรวจข้อคำถามอัตนัย (Essay) แต่ **ไม่สามารถตรวจอัตโนมัติได้** ต้องให้ครูตรวจเอง

## ประเภทข้อคำถามและการตรวจ

### 1. **Multiple Choice / True/False**
- ✅ **ตรวจอัตโนมัติได้**
- ระบบจะเปรียบเทียบคำตอบที่เลือกกับคำตอบที่ถูกต้อง
- ให้คะแนนทันทีเมื่อส่งคำตอบ

### 2. **Short Answer / Fill in the Blank**
- ✅ **ตรวจอัตโนมัติได้** (บางส่วน)
- ระบบจะเปรียบเทียบคำตอบแบบ case-insensitive และ trim whitespace
- **ข้อจำกัด**: ต้องตอบตรงกับคำตอบที่กำหนดไว้เท่านั้น
- **ตัวอย่าง**: ถ้าคำตอบที่ถูกต้องคือ "JavaScript" แต่ตอบ "JS" จะถือว่าผิด

### 3. **Essay (เรียงความ)**
- ❌ **ตรวจอัตโนมัติไม่ได้**
- ต้องให้ครูตรวจเอง
- ระบบจะบันทึกคำตอบไว้ แต่จะให้คะแนนเป็น **0** จนกว่าครูจะตรวจ
- เมื่อครูตรวจแล้ว ต้องอัปเดตคะแนนด้วยตนเอง

## การทำงานของระบบ

### เมื่อนักเรียนส่งคำตอบ Essay:
1. ระบบบันทึกคำตอบไว้ใน `QuizAttempt.answers`
2. ระบบคำนวณคะแนนเฉพาะข้อที่ตรวจอัตโนมัติได้
3. ข้อ Essay จะได้คะแนน **0** ชั่วคราว
4. ระบบแสดงสถานะ "รอการตรวจ" สำหรับข้อ Essay

### เมื่อครูตรวจ Essay:
1. ครูต้องเข้าไปดูคำตอบ Essay ใน Quiz Results
2. ครูให้คะแนนตามที่เห็น fit
3. ครูอัปเดตคะแนนในระบบ (ต้องสร้าง API สำหรับนี้)
4. ระบบคำนวณคะแนนรวมใหม่

## สถานะใน Quiz Results

### สำหรับข้อ Essay:
- `isCorrect: null` - หมายถึงยังไม่ได้ตรวจ
- `pointsEarned: 0` - คะแนนชั่วคราว (จนกว่าครูจะตรวจ)
- แสดงข้อความ "รอการตรวจ" ในหน้า Quiz Results

### สำหรับข้ออื่นๆ:
- `isCorrect: true/false` - ถูก/ผิด
- `pointsEarned: [คะแนน]` - คะแนนที่ได้

## ข้อแนะนำ

### สำหรับครู:
1. **ใช้ Essay สำหรับคำถามที่ต้องการความคิดเห็นหรือการวิเคราะห์**
2. **ระบุเกณฑ์การให้คะแนนไว้ในคำอธิบายข้อคำถาม**
3. **ตรวจ Essay อย่างสม่ำเสมอ** เพื่อให้นักเรียนได้รับ feedback

### สำหรับนักเรียน:
1. **อ่านคำถาม Essay อย่างละเอียด**
2. **ตอบตามเกณฑ์ที่ระบุไว้**
3. **ตรวจสอบคำตอบก่อนส่ง**

## การพัฒนาต่อ

### Features ที่ควรเพิ่ม:
1. **Teacher Dashboard สำหรับตรวจ Essay**
   - แสดงรายการ Essay ที่รอการตรวจ
   - ฟอร์มให้คะแนนและ feedback
   - อัปเดตคะแนนอัตโนมัติ

2. **Notification System**
   - แจ้งเตือนครูเมื่อมี Essay รอการตรวจ
   - แจ้งเตือนนักเรียนเมื่อครูตรวจเสร็จ

3. **Rubric System**
   - กำหนดเกณฑ์การให้คะแนนสำหรับ Essay
   - แสดง rubric ให้นักเรียนเห็นก่อนทำ

4. **AI-Assisted Grading** (Optional)
   - ใช้ AI ช่วยตรวจ Essay (เป็นเพียงคำแนะนำ)
   - ครูยังคงต้องตรวจเองเพื่อความถูกต้อง

## ตัวอย่างโค้ด

### Backend: การตรวจ Essay
```javascript
// ใน checkAnswer function
case 'essay':
  // Essays are not auto-graded
  return null; // null = ยังไม่ได้ตรวจ
```

### Frontend: การแสดงผล Essay
```javascript
// ใน QuizResults.jsx
{question.questionType === 'essay' && question.isCorrect === null && (
  <div className="bg-yellow-50 border-yellow-200 p-3 rounded">
    <p className="text-yellow-800">
      ⏳ รอการตรวจจากครู
    </p>
  </div>
)}
```

## สรุป

- **Essay ไม่สามารถตรวจอัตโนมัติได้** - ต้องให้ครูตรวจเอง
- **Short Answer ตรวจอัตโนมัติได้** - แต่ต้องตอบตรงกับคำตอบที่กำหนด
- **Multiple Choice/True False ตรวจอัตโนมัติได้** - ให้คะแนนทันที
- **ต้องสร้าง Teacher Dashboard สำหรับตรวจ Essay** ในอนาคต


